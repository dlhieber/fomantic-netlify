<script>
  $('.submit.button').api({
    action: 'submit article',
    method: "POST",
    serializeForm: true,
    
    beforeSend: function(settings) {
      if(!netlifyIdentity.currentUser().app_metadata.roles.includes('Admin')) {
        
        return false;
      }
      // open console to inspect object
      console.log(settings.data);
      return settings;
    },

    onResponse: function(response) {
      // make some adjustments to response
      return response;
    },
    successTest: function(response) {
      // test whether a JSON response is valid
      return response.success || false;
    },
    onComplete: function(response, element, xhr) {
      // always called after XHR complete
      console.log(response)
    },
    onSuccess: function(response, element, xhr) {
      // valid response and response.success = true
     
    },
    onFailure: function(response, element, xhr) {
      // request failed, or valid response but response.success = false
      
    },
    onError: function(errorMessage, element, xhr) {
      // invalid response
      console.log(errorMessage)
    },
    onAbort: function(errorMessage, element, xhr) {
      // navigated to a new page, CORS issue, or user canceled request
      console.log(errorMessage)
    }
  })
</script>


<form class="ui form">
    <div class="field">
      <label>Empty</label>
      <input name="empty" type="text">
    </div>
    <div class="field">
      <label>Dropdown</label>
      <select class="ui dropdown" name="dropdown">
        <option value="">Select</option>
        <option value="male">Choice 1</option>
        <option value="female">Choice 2</option>
      </select>
    </div>
    <div class="inline field">
      <div class="ui checkbox">
        <input type="checkbox" name="checkbox">
        <label>Checkbox</label>
      </div>
    </div>
    <div class="ui submit button">Submit</div>
    <div class="ui error message"></div>
  </form>